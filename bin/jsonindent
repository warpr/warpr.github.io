#!/usr/bin/env python

# Copyright 2010 Kuno Woudt <kuno@frob.nl>

# Copying and distribution of this file, with or without modification,
# are permitted in any medium without royalty provided the copyright
# notice and this notice are preserved.  This file is offered as-is,
# without any warranty.

import sys
import json

def trimlines (str):
    return "\n".join ([ l.rstrip () for l in str.split ("\n") ])

def jsonindent (f):
    data = f.read ()
    try:
        print trimlines (json.dumps (
                json.loads (data),
                indent=4, ensure_ascii=False).encode ("UTF-8"))
    except ValueError as e:
        print data
        print "[ERROR]", e


sys.argv.pop (0)
if (sys.argv):
    for f in sys.argv:
        jsonindent (open (f))
else:
    jsonindent (sys.stdin)
