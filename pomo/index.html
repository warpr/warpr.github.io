<!DOCTYPE html>
<html>
    <head>
        <title>pomo</title>
        <meta charset="utf-8" />
        <meta http-equiv="refresh" content="3333" />
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes" />
    </head>
    <style>
     html,body {
         box-sizing: border-box;
         padding: 0;
         margin: 0;
         border: 0;
         color: #fff;
         display: flex;
         align-items: center;
         justify-content: center;
         height: 100%;
         font-family: verdana, arial, sans-serif;
     }

     body.xrsz { background: #8a8a21; }
     body.work { background: #8a0721; }
     body.break { background: #6800e8; }
     body.sleep { background: #000; color: #111; }

     #task {
         flex: 1 1 auto;
         font-size: 96pt;
         padding: 0;
         margin: 0;
     }

     #taskTitle { font-size: 12pt; padding: 0; margin: 0; }
    </style>
    <script>
      var schedule = [
         { start:  "0:00", name: "Sleep",   style: "sleep" },
         { start:  "6:00", name: "Wake up", style: "break" },
         { start:  "7:00", name: "Pomo 1",  style: "work"  },
         { start:  "7:25", name: "Pomo 1",  style: "break" },
         { start:  "7:30", name: "Pomo 2",  style: "work"  },
         { start:  "7:55", name: "Pomo 2",  style: "break" },
         { start:  "8:00", name: "Pomo 3",  style: "work"  },
         { start:  "8:25", name: "Pomo 3",  style: "break" },
         { start:  "8:30", name: "Pomo 4",  style: "work"  },
         { start:  "8:55", name: "Pomo 4",  style: "break" },
         { start:  "9:00", name: "Pomo 5",  style: "work"  },
         { start:  "9:25", name: "Pomo 5",  style: "break" },
         { start:  "9:30", name: "Pomo 6",  style: "work"  },
         { start:  "9:55", name: "Pomo 6",  style: "break" },
         { start: "10:00", name: "XRSZ A",  style: "xrsz"  },
         { start: "11:00", name: "Pomo 7",  style: "work"  },
         { start: "11:25", name: "Pomo 7",  style: "break" },
         { start: "11:30", name: "Pomo 8",  style: "work"  },
         { start: "11:55", name: "Pomo 8",  style: "break" },
         { start: "12:00", name: "Pomo 9",  style: "work"  },
         { start: "12:25", name: "Pomo 9",  style: "break" },
         { start: "12:30", name: "Pomo 10", style: "work"  },
         { start: "12:55", name: "Pomo 10", style: "break" },
         { start: "13:00", name: "Pomo 11", style: "work"  },
         { start: "13:25", name: "Pomo 11", style: "break" },
         { start: "13:30", name: "Pomo 12", style: "work"  },
         { start: "13:55", name: "Pomo 12", style: "break" },
         { start: "14:00", name: "Lunch",   style: "break" },
         { start: "14:30", name: "Pomo 13", style: "work"  },
         { start: "14:55", name: "Pomo 13", style: "break" },
         { start: "15:00", name: "Pomo 14", style: "work"  },
         { start: "15:25", name: "Pomo 14", style: "break" },
         { start: "15:30", name: "Pomo 15", style: "work"  },
         { start: "15:55", name: "Pomo 15", style: "break" },
         { start: "16:00", name: "Pomo 16", style: "work"  },
         { start: "16:25", name: "Pomo 16", style: "break" },
         { start: "16:30", name: "Pomo 17", style: "work"  },
         { start: "16:55", name: "Pomo 17", style: "break" },
         { start: "17:00", name: "XRSZ B",  style: "xrsz"  },
         { start: "18:00", name: "Done",    style: "break" },
         { start: "20:30", name: "Wald 1",  style: "work" },
         { start: "20:55", name: "Wald 1",  style: "break" },
         { start: "21:00", name: "Wald 2",  style: "work" },
         { start: "21:25", name: "Wald 2",  style: "break" },
         { start: "21:30", name: "Wald 3",  style: "work" },
         { start: "21:55", name: "Wald 3",  style: "break" },
         { start: "22:00", name: "Wald 4",  style: "work" },
         { start: "22:25", name: "Sleep",   style: "sleep" },
         { start: "24:00", name: "End of day", style: "sleep" }
     ];

     var i;
     var scheduleLength = schedule.length;
     for (i = 0; i < scheduleLength; i++) {
         var parts = schedule[i].start.split (":");
         schedule[i].startTime = parseInt(parts[0], 10) * 60 + parseInt(parts[1], 10);
     }

     var update = function () {
         "use strict";

         var body = document.getElementsByTagName('body')[0];
         var remaining = document.getElementById("remaining");
         var taskTitle = document.getElementById("taskTitle");

         var d = new Date();
         var now = d.getHours () * 60 + d.getMinutes ();

         var currentTask = schedule[0];
         var nextTask = schedule[1];
         for (i = 0; i < scheduleLength; i++) {
             if (schedule[i].startTime > now) {
                 nextTask = schedule[i];
                 break;
             }
             currentTask = schedule[i];
         }

         var minutes = now - currentTask.startTime;
         var minutesRemaining = nextTask.startTime - now;

         body.setAttribute('class', currentTask.style)

         var seconds = 59 - d.getSeconds();
         if (seconds < 10) {
             seconds = "0" + seconds;
         }

         remaining.innerHTML = minutesRemaining + ":" + seconds;
         taskTitle.innerHTML = currentTask.name;
     };

     setInterval(update, 1000);
    </script>
    <body>
        <div id="task">
            <span id="remaining">23:23</span>
            <span id="taskTitle"></span>
        </div>
    </body>
</html>
